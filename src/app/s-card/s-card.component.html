<!-- <p>s-card works!</p> -->
 <!-- Selected Text Display -->
<!-- <p class="text-cyan-200 ml-4 sm:ml-20 hover:text-cyan-400 text-xl sm:text-2xl mb-4"> -->
  <!-- Selected: {{ selectedPhrases() }} -->
<!-- </p> -->
<!-- Toggle Button (Fixed top-right corner) --

<h2 [ngClass]="{'animate-bounce':selectedPhrases()===''}" class="text-xl font-bold mb-2 ml-4">{{selectedPhrases()===''?'pick a phrase â†’': 'currently studying: ' + selectedPhrases()}}</h2>

<button
  class="bg-cyan-200 text-cyan-900 px-4 py-2 rounded fixed top-15 right-9 z-50 shadow-md hover:bg-cyan-300 transition"
  (click)="toggleSidebar()"
>
  {{ sideBar ? 'Close Menu' : 'Open Menu' }}
</button>-->

<header class="flex justify-between items-center p-4 bg-[#0F1F26] shadow-md text-cyan-100">
  <h2 class="text-lg md:text-xl font-bold">
    {{ selectedPhrases() === '' ? 'ðŸ“š Pick a list â†’' : 'Currently studying: ' + selectedPhrases() }}
  </h2>
  <button
    (click)="toggleSidebar()"
    class="bg-cyan-500 hover:bg-cyan-400 text-black px-3 py-2 rounded-lg shadow transition"
  >
    {{ sideBar ? 'âœ– Close' : 'â˜° Menu' }}
  </button>
</header>
<!-- BACKDROP -->
<div *ngIf="sideBar" class="fixed inset-0 bg-black bg-opacity-60 ml-[5rem] z-40 flex items-center justify-center">
  <!-- MODAL PANEL -->
  <div class="bg-cyan-950 text-white w-[90%] max-w-lg rounded-lg shadow-xl p-6 space-y-6 mt-[4rem] overflow-y-scroll h-[34rem] z-50 animate-fade-in">
    <!-- Close Button -->
    <div class="text-right">
      <button
        class="text-sm bg-cyan-800 hover:bg-cyan-700 text-white px-3 py-1 rounded"
        (click)="close()"
      >
        âœ– Close
      </button>
    </div>
    <!-- Lists Section -->
    <div>
      <h2  class="text-xl font-bold mb-2 ">{{selectedPhrases()===''?'pick a phrase': 'selected: ' + selectedPhrases()}}</h2>
      <h2 class="text-lg font-bold mb-2 border-b border-cyan-600 pb-1">Lists</h2>
      <div class="flex flex-col gap-2 h-[15rem] overflow-y-scroll">
        <button
          *ngFor="let item of phraseCourse"
          (click)="getSpecificPhrases(item.s)"
          class="hover:bg-cyan-600 text-white px-3 py-2 rounded transition"
          [ngClass]="item.isDone ? 'bg-blue-600' : 'bg-cyan-700'"
        >
          {{ item.s }}
        </button>
      </div>
    </div>
    <!-- Story Section -->
    <div>
      <h2 class="text-lg font-bold mt-4 mb-2 border-b border-cyan-600 pb-1">Story</h2>
      <div class="flex flex-col gap-2 h-[15rem] overflow-y-scroll">
        <button
          *ngFor="let item of phraseStory"
          (click)="getSpecificPhrases(item.s)"
          class="hover:bg-cyan-500 text-white px-3 py-2 rounded transition"
          [ngClass]="item.isDone ? 'bg-[#0f765e]' : 'bg-cyan-500'"
        >
          {{ item.s }}
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Sidebar Panel (Right-Aligned, Responsive)
<div
  [ngClass]="sideBar ? 'translate-x-0' : 'translate-x-full'"
  class="fixed top-0 right-0 w-64 h-full bg-cyan-950 text-white overflow-y-auto transition-transform duration-300 ease-in-out shadow-lg z-40 sm:w-72"
  >
  <div class="p-5 space-y-6">

    <!-- Top Control --
    <div class="text-left">
      <button
        class="text-sm bg-cyan-800 hover:bg-cyan-700 text-white px-3 py-1 rounded transition"
        (click)="close()"
      >
        Close
      </button>
    </div>

    <!-- Lists Section --
    <div>
      <h2 class="text-lg font-bold mb-2 border-b border-cyan-600 pb-1">Lists</h2>
      <div class="flex flex-col gap-2">
        <button
          *ngFor="let item of phraseCourse"
          (click)="getSpecificPhrases(item.s)" 
          class=" hover:bg-cyan-600 text-white px-3 py-2 rounded transition"
            
          [ngClass]="item.isDone?'bg-bg-blue-600':'bg-cyan-700'">
          {{ item.s }}

        </button>
      </div>
    </div>

    <!-- Story Section --
    <div>
      <h2 class="text-lg font-bold mt-4 mb-2 border-b border-cyan-600 pb-1">Story</h2>
      <div class="flex flex-col gap-2">
        <button
          *ngFor="let item of phraseStory"
          (click)="getSpecificPhrases(item.s)"
          class=" hover:bg-cyan-500 text-white px-3 py-2 rounded transition"
          [ngClass]="item.isDone?'bg-[#0f765e]':'bg-cyan-500'">
 
          {{ item.s }}
        </button>
      </div>
    </div>

  </div>

</div> -->
<!-- Only show Start button if list is selected and quiz hasn't started -->
<div *ngIf="isReadyToStart && !quizStarted" class="text-center mt-6">
  <button (click)="startQuiz()"
          class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded shadow">
    â–¶ Start
  </button>
  
    <div class="flex flex-col justify-center mt-6 sm:flex-row gap-3">
      <button (click)="toggleDirectionMode(directionModeE)"
              class="px-4 py-2 rounded shadow text-white"
              [ngClass]="{ 'bg-cyan-700': directionMode === directionModeE, 'bg-cyan-500': directionMode !== directionModeE }">
        {{ id }} â†’ English
      </button>
      <button (click)="toggleDirectionMode(directionModeC)"
              class="px-4 py-2 rounded shadow text-white"
              [ngClass]="{ 'bg-cyan-700': directionMode === directionModeC, 'bg-cyan-500': directionMode !== directionModeC }">
        English â†’ {{ id }}
      </button>
    </div>
</div>

<div *ngIf="['Italian','Japanese','Korean','Russian','German'].includes(id) && quizStarted"
     class=" text-white min-h-screen py-6 px-4 animate-slide-in-right">

  <!-- Top Controls -->
  <div class="flex flex-col items-center gap-4 mb-6">


    
    <button *ngIf="['kor-to-eng','jp-to-eng','itn-to-eng','rus-to-eng','fr-to-eng'].includes(directionMode)" (click)="phraseOnMode()" class="bg-cyan-500 hover:bg-cyan-600 px-4 py-2 rounded shadow">
      {{ phraseOn ? 'Hide' : 'Show' }} Phrase
    </button>

    <button (click)="togglePronunciation()" class="bg-cyan-500 hover:bg-cyan-600 px-4 py-2 rounded shadow">
      {{ showPronunciation ? 'Hide' : 'Show' }} Pronunciation
    </button>

    <!--<p> Remaining: {{ remainingPhrases().length }}</p>
    <p><button class="bg-cyan-500 hover:bg-cyan-600 rounded text-blue-200 px-4 py-2"  (click)="startQuiz()">start</button></p>
    <p>currant Phrase: {{currentPhrase.en}}</p>
<!-- Direction Toggle -->

    <!-- Answer Mode Toggle -->
    <div class="flex flex-col sm:flex-row gap-4">
      <button *ngIf="directionMode === 'jp-to-eng' || directionMode === 'itn-to-eng' || directionMode==='kor-to-eng' ||directionMode==='ge-to-eng'|| directionMode==='rus-to-eng'"
              (click)="playAudio(directionMode === directionModeE ? currentPhrase.phrase : currentPhrase.en, directionMode === directionModeE ? lang : 'en-US')"
              class="bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 mt-4 rounded text-sm shadow">
        Play Audio
    </button>
        <!--  --
    <button (click)="toggleHighlight()" class="mt-4 bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded">
       Highlight
    </button>-->

    </div>
  </div>

  <!-- Main Card -->
  <div class="bg-gray-800 rounded-lg shadow-xl p-6 max-w-2xl mx-auto">

    <!-- <p class="text-2xl font-semibold text-cyan-300">{{ getQuestion() }}</p> -->

    <p *ngIf="phraseOn" class="text-2xl font-bold text-blue-300 "><span [innerHTML]="formatPhrase(getQuestion() +'')"></span></p>

    <p *ngIf="showPronunciation && directionMode === directionModeE" class="text-sm text-gray-300 mt-1">
      
      <span [innerHTML]="formatPhrase(currentPhrase.pr + '')"></span>
    </p>

    <!-- Type Mode --
    <div *ngIf="answerMode === 'type'" class="mt-6">
      <input #inputRef type="text" [(ngModel)]="userInput"
             (click)="updateCursor(inputRef)" (keyup)="updateCursor(inputRef)"  class="bg-gray-700 border border-cyan-500 text-white px-3 py-2 rounded w-full mb-2 mr-2 focus:outline-none focus:ring-2 focus:ring-cyan-400">
      <button (click)="submitAnswer()" class="bg-cyan-600 hover:bg-cyan-700 text-white px-4 py-2 rounded shadow">
        Submit
      </button>
      <p class="mt-3 text-lg font-medium"
         [ngClass]="{ 'text-green-400': result.startsWith('âœ…'), 'text-red-400': result.startsWith('âŒ') }">
        <span [innerHTML]="formatPhrase(result)"></span>

      </p>
      
<!-- Next button only appears after answer -->
<!-- <button *ngIf="answered()" (click)="next()">Next</button> -->


      <!-- Hints --
      <div *ngIf="!['kor-to-eng','jp-to-eng','itn-to-eng','rus-to-eng'].includes(directionMode)" class="flex flex-wrap gap-2 mt-4">
        <button (click)="generateHint1()" class="bg-cyan-500 hover:bg-cyan-600 text-white px-3 py-1 rounded shadow">
          Hint 1 (Chars)
        </button>
        <button (click)="generateHint2()" class="bg-cyan-500 hover:bg-cyan-600 text-white px-3 py-1 rounded shadow">
          Hint 2 (Words)
        </button>
        <button (click)="clearHints()" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded shadow">
          Clear
        </button>
      </div>

      <div *ngIf="showHint1" class="mt-4">
        <p class="text-sm font-semibold text-gray-400 mb-2">Hint 1 (Characters):</p>
        <div class="flex flex-wrap gap-2">
          <button *ngFor="let char of hint1Array"
                  (click)="appendToInput(char)"
                  class="bg-cyan-200 hover:bg-cyan-300 text-black px-2 py-1 rounded shadow">
            {{ char }}
          </button>
        </div>
      </div>

      <div *ngIf="showHint2" class="mt-4">
        <p class="text-sm font-semibold text-gray-400 mb-2">Hint 2 (Words):</p>
        <div class="flex flex-wrap gap-2">
          <button *ngFor="let word of hint2Array"
                  (click)="appendToInput(word + ' ')"
                  class="bg-cyan-200 hover:bg-cyan-300 text-black px-2 py-1 rounded shadow">
            {{ word }}
          </button>
        </div>
      </div>
    </div>-->

    <!-- Card Mode -->
    <div  class="mt-9">
      <button (click)="showAnswer2 = true" class="bg-emerald-200 hover:bg-emerald-700 text-emerald-600 hover:text-emerald-200 px-4 py-2 rounded shadow">
        Reveal Answer
      </button>


      <p *ngIf="showAnswer2" class="mt-4 text-xl text-cyan-400 font-semibold">
          <span [innerHTML]="formatPhrase(getAnswer())"></span> 
      </p>
      <p *ngIf="showPronunciation && directionMode === directionModeC && showAnswer2" class="text-sm text-gray-400 mt-1">
        <span [innerHTML]="formatPhrase(currentPhrase.pr)"></span> 

      </p>
      
      <button *ngIf="showAnswer2&& directionMode ===directionModeC"
              (click)="playAudio(directionMode === directionModeC ? currentPhrase.phrase : currentPhrase.en, directionMode === directionModeC ? lang : 'en-US')"
              class="bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-2 mt-4 rounded text-sm shadow">
        Play Audio
    </button>
        
      
    <!-- Show result after submitting -->
    <!-- <p *ngIf="answered()" class="mt-2 text-lg"> -->
      <!-- {{ lastResult() }} -->
    <!-- </p> -->

    <!-- Next button only appears after answer -->
    <!-- <button *ngIf="answered()" (click)="next()">Next</button> -->

        </div>
  </div>

  <!-- Navigation -->
  <div class="flex flex-col justify-between items-center mt-8 max-w-2xl mx-auto">
    <div class="text-sm text-cyan-300"><p>Cards: {{ remainingPhrases().length }}</p></div>
    <div class="">
      <div *ngIf="answered() && remainingPhrases().length!==0">
        <!--<button (click)="prev()" [disabled]="currentIndex() === 0"
                class="bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded shadow disabled:opacity-40">
          Prev
        </button>-->
        <button (click)="next()" class="bg-cyan-500 hover:bg-cyan-600 text-white px-4 py-2 rounded shadow "><!--[disabled]="currentIndex() === phrases().length - 1-->
          Next
        </button>
      
      </div>
      <div *ngIf="showAnswer2">
          
        <button (click)="again()" class="bg-red-600 hover:bg-cyan-700 text-white px-4 py-2 rounded shadow ml-4 mr-5">Again</button>
        <button (click)="correct()" class="bg-emerald-600 hover:bg-cyan-700 text-white px-4 py-2 rounded shadow">Correct</button>


      </div>

    </div>

      
  <!-- Submit Button -->
  <!-- <button (click)="submitAnswer()" class="bg-cyan-600 hover:bg-cyan-700 text-white px-4 py-2 rounded shadow"> -->
    <!-- Submit -->
  <!-- </button> -->
  </div>
</div>
