  <!-- 🌍 Wrapper -->
<div *ngIf="authLoaded" class="min-h-screen text-white ">

  <!-- 🧍 Signed-In State -->
  <div
    *ngIf="check() === 'signed in'; else hero"
    class="flex flex-col items-center justify-start text-center animate-fadeIn px-4 sm:px-6 md:px-10 pt-10 md:pt-16 space-y-8 sm:space-y-10"
  >

    <!-- 👋 Welcome -->
    <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold text-cyan-200 drop-shadow">
      Welcome{{ user() ? ', ' + user() : '' }}!
    </h1>
    <p class="text-base sm:text-lg md:text-xl text-cyan-100 mb-6">
      Continue your phrase mastery journey
    </p>

    <div class="w-full max-w-6xl mx-auto space-y-8 sm:space-y-10">

      <!-- 🌐 Language Selector -->
      <div class="text-center">
        <label for="language" class="block text-lg font-semibold text-cyan-200 mb-3">
          🌍 Select Language Progress
        </label>
        <select
          id="language"
          [(ngModel)]="selectedLanguage"
          class="w-full sm:w-72 px-4 py-3 rounded-xl bg-[#0a1a23] text-cyan-100 border border-cyan-600 
                 focus:ring-2 focus:ring-cyan-400 focus:outline-none shadow-md"
        >
          <option *ngFor="let lang of language" [ngValue]="lang">
            {{ lang.name }}
          </option>
        </select>
      </div>

      <!-- 📘 Grammar Section -->
      <div class="bg-[#0a1a23] shadow-xl rounded-2xl p-5 sm:p-8">
        <h2 class="text-xl sm:text-2xl font-bold text-emerald-300 mb-4 sm:mb-6 flex items-center gap-2">
          📘 Grammar
        </h2>

        <!-- Stats -->
        <div class="flex flex-wrap justify-center gap-4 sm:gap-6 mb-6 sm:mb-8">
          <div
            class="bg-[#030a0e] shadow-lg rounded-xl p-5 sm:p-6 w-40 sm:w-52 text-center hover:scale-105 transition-transform"
          >
            <h3 class="font-semibold text-base sm:text-lg text-emerald-200">Completed</h3>
            <p class="text-2xl sm:text-3xl font-bold text-cyan-200 mt-2">
              {{ getDonePhrasesByType('grammar').length }}
            </p>
            <p class="text-sm text-emerald-500">out of {{ total() }}</p>
          </div>
        </div>

        <!-- Grammar List -->
        <ul class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4">
          <li
            *ngFor="let phrase of getDonePhrasesByType('grammar')"
            class="bg-[#030a0e] p-4 sm:p-5 rounded-xl shadow-md hover:scale-105 transition-transform text-left border border-cyan-800"
          >
            <p class="text-cyan-200 font-semibold text-sm sm:text-base">{{ phrase.name }}</p>
          </li>
        </ul>

        <p
          *ngIf="getDonePhrasesByType('grammar').length === 0"
          class="text-cyan-400 mt-4 text-center"
        >
          🚀 No grammar phrases completed yet.
        </p>
      </div>

      <!-- 📖 Story Section -->
      <div class="bg-[#0a1a23] shadow-xl rounded-2xl p-5 sm:p-8">
        <h2 class="text-xl sm:text-2xl font-bold text-purple-300 mb-4 sm:mb-6 flex items-center gap-2">
          📖 Stories
        </h2>

        <!-- Stats -->
        <div class="flex flex-wrap justify-center gap-4 sm:gap-6 mb-6 sm:mb-8">
          <div
            class="bg-[#030a0e] shadow-lg rounded-xl p-5 sm:p-6 w-40 sm:w-52 text-center hover:scale-105 transition-transform"
          >
            <h3 class="font-semibold text-base sm:text-lg text-emerald-200">Completed</h3>
            <p class="text-2xl sm:text-3xl font-bold text-cyan-200 mt-2">
              {{ getDonePhrasesByType('story').length }}
            </p>
            <p class="text-sm text-emerald-500">out of 20</p>
          </div>
        </div>

        <!-- Story List -->
        <ul class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 sm:gap-4">
          <li
            *ngFor="let phrase of getDonePhrasesByType('story')"
            class="bg-[#030a0e] p-4 sm:p-5 rounded-xl shadow-md hover:scale-105 transition-transform text-left border border-purple-800"
          >
            <p class="text-cyan-200 font-semibold text-sm sm:text-base">{{ phrase.name }}</p>
          </li>
        </ul>

        <p
          *ngIf="getDonePhrasesByType('story').length === 0"
          class="text-cyan-400 mt-4 text-center"
        >
          🚀 No stories completed yet.
        </p>
      </div>

      <!-- 🚀 Quick Links -->
      <div class="flex flex-col sm:flex-row justify-center items-center gap-4 sm:gap-6 w-full mt-8">
        <button [routerLink]="'/language/Korean'" class="bg-cyan-700 hover:bg-cyan-600 px-6 py-3 rounded-xl text-white shadow-md hover:shadow-lg transition w-full sm:w-auto">
          korean
        </button>
        <button  [routerLink]="'/language/Russian'" class="bg-emerald-700 hover:bg-emerald-600 px-6 py-3 rounded-xl text-white shadow-md hover:shadow-lg transition w-full sm:w-auto">
          russian
        </button>
        <button  (click)="navToSite(2)" class="bg-red-700 hover:bg-red-600 px-6 py-3 rounded-xl text-white shadow-md hover:shadow-lg transition w-full sm:w-auto">
          italian
        </button>
        
        <button  (click)="navToSite(0)" class="bg-indigo-700 hover:bg-indigo-600 px-6 py-3 rounded-xl text-white shadow-md hover:shadow-lg transition w-full sm:w-auto">
          Japanese
        </button>
      </div>

      <!-- ✨ Recent Phrases -->
      <div class="w-full mt-10 sm:mt-12">
        <h2 class="text-xl sm:text-2xl font-semibold text-cyan-200 mb-4 sm:mb-6">✨ Recent Phrases</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6">
          <div
            *ngFor="let phrase of recentPhrases"
            class="bg-[#0a1a23] rounded-xl p-5 shadow-md hover:scale-105 transition-transform text-left border border-cyan-800"
          >
            <p class="font-medium text-emerald-200 text-sm sm:text-base">{{ phrase.s }}</p>
            <p class="text-xs sm:text-sm text-cyan-100 mt-1">{{ phrase.content }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- 🌟 Hero Section for Not Signed-In Users --> 
<!-- 👤 Guest View -->
<ng-template #hero>
  <section class="relative py-20 sm:py-24 bg-gradient-to-br from-[#020b11] via-[#03131d] to-[#04121b] overflow-hidden">
    <!-- 🌀 Background Glow -->
    <div class="absolute inset-0">
      <div class="absolute w-[800px] h-[800px] bg-cyan-900/20 blur-[180px] rounded-full -top-40 -left-40 animate-pulse-slow"></div>
      <div class="absolute w-[600px] h-[600px] bg-emerald-700/20 blur-[160px] rounded-full bottom-0 right-0 animate-pulse-slow"></div>
    </div>

    <div class="relative container mx-auto px-6 text-center font-sans">
      <!-- 🏆 Hero Title -->
      <h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold text-cyan-300 tracking-wide mb-6 animate-fadeUp">
        Master Languages with Ease
      </h1>

      <!-- ✨ Subtitle -->
      <p (click)="clickSee()" class="text-lg sm:text-xl text-emerald-300 mb-12 animate-fadeUp delay-1">
        Explore hundreds of practical phrases  
        <span *ngIf="currentLang" class="text-lime-200 font-bold inline-block ml-2 animate-fadeBlink">
          {{ currentLang }}
        </span>
      </p>

      <!-- 🌏 Language Cards -->
      <div class="flex flex-wrap justify-center gap-6 sm:gap-8 mb-12 animate-fadeUp delay-2">
        <div
          *ngFor="let card of [
            {flag:'kr',name:'Korean',native:'한국어',color:'from-cyan-700 to-cyan-600',id:1},
            {flag:'ru',name:'Russian',native:'Русский',color:'from-blue-800 to-blue-600',id:3},
            {flag:'it',name:'Italian',native:'Italiano',color:'from-rose-800 to-rose-600',id:2},
            {flag:'jp',name:'Japanese',native:'日本語',color:'from-purple-900 to-purple-700',id:0}
          ]"
          (click)="navToSite(card.id)"
          [ngClass]="'bg-gradient-to-tr ' + card.color"
          class="relative shadow-lg rounded-xl p-6 w-44 sm:w-52 text-center cursor-pointer
                 transition-transform transform hover:-translate-y-2 hover:shadow-cyan-600/30
                 hover:scale-105 text-emerald-100 group overflow-hidden before:absolute before:inset-0
                 before:bg-gradient-to-r before:from-transparent before:via-cyan-400/10 before:to-transparent
                 before:translate-x-[-100%] hover:before:translate-x-[100%] before:transition-all before:duration-700"
        >
          <img [src]="'https://flagcdn.com/' + card.flag + '.svg'" class="mx-auto w-10 sm:w-12 mb-3" alt="{{ card.name }}">
          <h3 class="font-semibold text-lg text-emerald-100">{{ card.name }}</h3>
          <p class="text-sm text-emerald-300">{{ card.native }}</p>
        </div>
      </div>

      <!-- 💬 Features Section -->
      <section class="max-w-5xl mx-auto text-center bg-gray-900/40 backdrop-blur-md rounded-2xl border border-cyan-700/30 shadow-xl p-10 animate-fadeUp delay-3">
        <h2 class="text-3xl font-bold text-cyan-300 mb-4">What You’ll Find Here</h2>
        <p class="text-emerald-200 mb-10">
          Learn through <span class="text-lime-300 font-semibold">interactive practice tools</span> designed for real communication — not memorization.
        </p>

        <div class="grid sm:grid-cols-2 gap-6 text-left">
          <div class="feature-card">
            <p class="text-2xl mb-2">🎴</p>
            <h3>Study Cards</h3>
            <p>Learn phrases visually with meaning and pronunciation.</p>
          </div>

          <div class="feature-card">
            <p class="text-2xl mb-2">🔊</p>
            <h3>Audio Pronunciation</h3>
            <p>Listen with native-like pronunciation via browser speech synthesis.</p>
          </div>

          <div class="feature-card">
            <p class="text-2xl mb-2">✍️</p>
            <h3>Type-in Practice</h3>
            <p>Challenge yourself by typing translations or completing sentences.</p>
          </div>

          <div class="feature-card">
            <p class="text-2xl mb-2">💬</p>
            <h3>Chat Mode</h3>
            <p>Engage in simulated dialogues to strengthen conversational skills.</p>
          </div>
        </div>
      </section>

      <!-- 🌐 Browser Support -->
      <div class="max-w-3xl mx-auto bg-gray-900/40 rounded-2xl border border-emerald-700/30 p-8 mt-20 animate-fadeUp delay-4">
        <h2 class="text-2xl font-bold text-emerald-300 mb-4 text-center">Browser Notice</h2>
        <p class="text-emerald-200 mb-4 text-left">
          Web Speech API works best in:
        </p>
        <ul class="text-emerald-200 space-y-2 text-left">
          <li>🌐 <b>Edge or Chrome:</b> Full support for voice & recognition.</li>
          <li>🍏 <b>Safari:</b> Playback only.</li>
          <li>🦊 <b>Firefox / Opera:</b> Partial support.</li>
        </ul>
        <p class="text-emerald-400 mt-4 text-sm italic">
          Use Edge or Chrome for full experience.
        </p>
      </div>
    </div>
  </section>
</ng-template>

</div>
