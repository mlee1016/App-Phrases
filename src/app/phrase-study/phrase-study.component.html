<!-- Outer Wrapper -->
<div class="flex flex-col md:flex-row h-screen overflow-hidden">

  <!-- ğŸ”¹ Backdrop (mobile only) -->
  <div *ngIf="sidebarOpen" 
       class="fixed inset-0 bg-white bg-opacity-50 z-30 md:hidden"
       (click)="toggleSidebar()">
  </div>

  <!-- ğŸ”¹ Sidebar -->
  <div *ngIf="sidebarOpen"
       class="w-72 bg-cyan-900 text-white p-5 shadow-xl overflow-y-auto z-40
              fixed top-0 left-0 h-full md:static md:h-auto md:block transition-transform duration-300">
    
    <div class="flex justify-between items-center mb-4 md:hidden">
      <h2 class="text-lg font-bold">ğŸ“š Menu</h2>
      <button (click)="toggleSidebar()" class="text-white text-2xl">&times;</button>
    </div>

    <h2 *ngIf="m1==='story'" class="text-lg font-bold mb-3 border-b border-cyan-700 pb-1">ğŸ“– Stories</h2>
    <ul *ngIf="m1==='story'" class="space-y-1 mb-6">
      <li *ngFor="let item of allListS"
          (click)="selectItem(item.s)"
          [class.bg-cyan-700]="selectedItem === item.s"
          class="cursor-pointer px-3 py-1.5 rounded hover:bg-cyan-700 transition">
        {{ item.s }}
      </li>
    </ul>

    

    <h2 *ngIf="m1==='popular'" class="text-lg font-bold mb-3 border-b border-cyan-700 pb-1">ğŸ“– Popular</h2>
    <ul *ngIf="m1==='popular'" class="space-y-1 mb-6">
      <li  *ngFor="let item of Popular"
          (click)="selectItem(item.s)"
          [class.bg-cyan-700]="selectedItem === item.s"
          class="cursor-pointer px-3 py-1.5 rounded hover:bg-cyan-700 transition">
        {{ item.s }}
      </li>
    </ul>
    <h2 *ngIf="m1==='course'" class="text-lg font-bold mb-3 border-b border-cyan-700 pb-1">ğŸ“˜ Grammar</h2>
    <ul *ngIf="m1==='course'" class="space-y-1">
      <li *ngFor="let item of allList"
          (click)="selectItem(item.s)"
          [class.bg-cyan-700]="selectedItem === item.s"
          class="cursor-pointer px-3 py-1.5 rounded hover:bg-cyan-700 transition">
        {{ item.s }}
      </li>
    </ul>
  </div>

  

  <!-- ğŸ”¹ Main Panel -->
  <div class="flex-1 p-6 md:p-8 space-y-8 overflow-y-auto min-h-screen md:min-h-0 relative z-10">
    
    <!-- Top Bar -->
    <div class="flex justify-between items-center top-0 backdrop-blur-md py-2 z-30 bg-[#0F1F26] shadow-md text-cyan-100 ">
      <button (click)="toggleSidebar()"
              class="bg-cyan-600 text-white px-5 py-2 rounded-lg shadow hover:bg-cyan-700 transition active:scale-95">
        {{ sidebarOpen ? 'â–¶ Start' : 'â˜° Menu' }}
      </button>
      <h1 class="hidden md:block text-2xl font-semibold text-cyan-800">
        ğŸ“Œ Selected: <span class="font-bold">{{ selectedItem || 'None' }}</span>
      </h1>
    </div>

    <!-- Selected Item (Mobile) -->
    <h1 class="block md:hidden text-xl font-semibold text-cyan-800 mt-2">
      ğŸ“Œ Selected: <span class="font-bold">{{ selectedItem || 'None' }}</span>
    </h1>

    <!-- Audio Controls -->
    <div *ngIf="!sidebarOpen" class="flex justify-center gap-3 mt-5">
      <button (click)="playAudio(currentPhrase[selectLang].join(' '), playLanguage)" 
              class="px-4 py-2 bg-emerald-600 text-white rounded-lg shadow hover:bg-emerald-700 transition">
        â–¶ Play {{ selectLang | titlecase }}
      </button>
      <button (click)="stopAudio()" 
              class="px-4 py-2 bg-gray-400 text-white rounded-lg shadow hover:bg-gray-500 transition">
        â¹ Stop
      </button>
    </div>


    <!-- Phrase Card --
     
        
           (mouseover)="onHover(i, selectLang, currentPhrase)"
              (mouseleave)="clearHover()"


  -->
    <div *ngIf="selectedItem===''" class="bg-white shadow-md rounded-2xl p-6 mx-auto max-w-md flex flex-col gap-4 hover:shadow-lg hover:-translate-y-0.5 transition">
  <h2 class="text-2xl font-bold text-slate-800 text-center">Study Cards</h2>
  <div class="text-slate-700 text-center">
    Individually study phrases and words to understand their meaning and pronunciation.
  </div>
  <div class="bg-slate-100 text-slate-600 p-3 rounded-lg text-center">
    Learn Japanese and Korean, Italian, Russian phrases through cards showing meanings, readings, and examples.
  </div>
  <div class="text-slate-800 text-center leading-relaxed">
    Flip through study cards to practice each phrase. See pronunciation, grammar, and usage examples â€” perfect for self-paced learning.
  </div>
  <div class="bg-slate-200 text-slate-700 text-sm rounded-full px-3 py-1 self-center">story + popular + course</div>
</div>

    <div *ngIf="!sidebarOpen" 
         class="bg-white shadow-lg rounded-2xl p-6 text-center border border-cyan-200 max-w-2xl mx-auto">
      
      <div class="mb-3 text-xl font-semibold text-cyan-700 space-x-1 tracking-wide">
        <span *ngFor="let word of currentPhrase[selectLang]; let i = index"

              [ngClass]="{
                'bg-cyan-500 text-white': isActive(i, selectLang),
                'inline-block px-2 py-1 rounded-lg cursor-pointer transition': true
              }"
              (click)="selectWord(currentPhrase)">
          {{ word }}
        </span>
      </div>

      <div class="mb-2 text-gray-600 space-x-1">
        <span *ngFor="let word of currentPhrase[pro()]; let i = index"
              [ngClass]="{
                'bg-cyan-500 text-white': isActive(i, pro()),
                'inline-block px-2 py-1 rounded-lg': true
              }">
          {{ word }}
        </span>
      </div>

      <div class="mb-4 text-gray-800 space-x-1 text-lg">
        <span *ngFor="let word of currentPhrase.en; let i = index"
              [ngClass]="{
                'bg-cyan-500 text-white': isActive(i, 'en'),
                'inline-block px-2 py-1 rounded-lg': true
              }">
          {{ word }}
        </span>
      </div>

      
      <!--<div *ngIf="currentPhrase.des" class="text-sm text-cyan-800 italic">
        ğŸ§  <span class="font-semibold">Grammar Note:</span> {{ currentPhrase.des }}
      </div>
    </div>-->

    <!-- Navigation -->
    <div *ngIf="!sidebarOpen" class="flex justify-between max-w-xl mx-auto mb-10">
      <button (click)="prevCard()"
              class="px-5 py-2 bg-cyan-500 rounded-lg shadow hover:bg-cyan-300 transition">
        â—€ Prev
      </button>
      <button (click)="nextCard()" 
              class="px-5 py-2 bg-cyan-500 rounded-lg shadow hover:bg-cyan-300 transition">
        Next â–¶
      </button>
    </div>


    
    <!-- PROGRESS -->
     
      <div class="mt-5 sm:mt-6">
        <div class="w-full bg-gray-300 rounded-full h-3 overflow-hidden">
          <div class="bg-green-500 h-3 progress-bar-inner"
              [style.width.%]="((currentIndex+1) / phrases.length) * 100"> 
          </div>
        </div>
        <p class="mt-2 text-xs sm:text-sm text-green-500">
          Progress: {{ ((currentIndex+1) / phrases.length * 100) | number:'1.0-0' }}%
          <!-- <span *ngIf="proportionCorrect" class="ml-2">| Accuracy: {{ proportionCorrect | number:'1.0-0' }}%</span> -->
        </p>
          
      </div>


  </div>
  <!-- âœ¨ Phrase Display Card --
<div *ngIf="!sidebarOpen" 
     class="phrase-card bg-gradient-to-br from-cyan-50 via-white to-cyan-100 
            border border-cyan-300/40 rounded-2xl shadow-lg 
            p-6 text-center mx-auto max-w-2xl animate-fadeInUp">

  <!-- ğŸŒ Language Text --
  <div class="phrase-line mb-3 text-xl font-semibold text-cyan-800 tracking-wide flex flex-wrap justify-center gap-1">
    <span *ngFor="let word of currentPhrase[selectLang]; let i = index"
          [ngClass]="{
            'active-word': isActive(i, selectLang),
            'phrase-word': true
          }"
          (click)="selectWord(currentPhrase)">
      {{ word }}
    </span>
  </div>
  
      <div class="mb-2 text-gray-600 space-x-1">
        <span *ngFor="let word of currentPhrase[pro()]; let i = index"
              [ngClass]="{
                'bg-cyan-500 text-white': isActive(i, pro()),
                'inline-block px-2 py-1 rounded-lg': true
              }">
          {{ word }}
        </span>
      </div>
  <!-- ğŸŒ English Translation --
  <div class="phrase-line mb-4 text-lg text-gray-800 flex flex-wrap justify-center gap-1">
    <span *ngFor="let word of currentPhrase.en; let i = index"
          [ngClass]="{
            'active-word': isActive(i, 'en'),
            'phrase-word text-base': true
          }">
      {{ word }}
    </span>
  </div>
</div>
<div *ngIf="!sidebarOpen" 
     class="phrase-card bg-gradient-to-br from-cyan-50 via-white to-cyan-100 
            border border-cyan-300/40 rounded-2xl shadow-lg 
            p-6 text-center mx-auto max-w-2xl animate-fadeInUp">

  <!-- ğŸŒ Language Text --
  <div class="phrase-line mb-3 text-xl font-semibold text-cyan-800 tracking-wide flex flex-wrap justify-center gap-1">
    <span *ngFor="let word of currentPhrase[selectLang]; let i = index"
          (mouseenter)="hoverWord(word)"
          (mouseleave)="clearHover()"
          [ngClass]="{
            'active-word': isActive(i, selectLang) || isHovered(word),
            'phrase-word': true
          }">
      {{ word }}
    </span>
  </div>

  <!-- ğŸ—£ Pronunciation Line --
  <div class="phrase-line mb-2 text-gray-600 flex flex-wrap justify-center gap-1">
    <span *ngFor="let word of currentPhrase[pro()]; let i = index"
          [ngClass]="{
            'highlight-word': isHoveredByPron(word),
            'phrase-word text-gray-700': true
          }">
      {{ word }}
    </span>
  </div>

  <!-- ğŸŒ English Translation --
  <div class="phrase-line mb-4 text-lg text-gray-800 flex flex-wrap justify-center gap-1">
    <span *ngFor="let word of currentPhrase.en; let i = index"
          [ngClass]="{
            'highlight-word': isHoveredByEng(word),
            'phrase-word text-base': true
          }">
      {{ word }}
    </span>
  </div>
</div>-->

<!-- ğŸš€ Navigation Buttons --
<div *ngIf="!sidebarOpen" class="nav-buttons flex justify-center gap-6 mt-6 animate-fadeInUp">
  <button (click)="prevCard()" class="nav-btn">â—€ Prev</button>
  <button (click)="nextCard()" class="nav-btn">Next â–¶</button>
</div>-->

</div>
