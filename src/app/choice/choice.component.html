
<!----
<header class="flex justify-between items-center p-4 bg-[#0F1F26] shadow-md text-cyan-100">
  <h2 class="text-lg md:text-xl font-bold">
    {{ inputh() === '' ? 'ğŸ“š Pick a list â†’' : 'Currently studying: ' + inputh() }}
  </h2>
  <button
    (click)="toggleSidebar()"
    class="bg-cyan-500 hover:bg-cyan-400 text-black px-3 py-2 rounded-lg shadow transition"
  >
    {{ sideBar ? 'âœ– Close' : 'â˜° Menu' }}
  </button>
</header>
<div *ngIf="sideBar" class="fixed inset-0 bg-black bg-opacity-60 z-40 flex items-center justify-center">
  
  <!-- MODAL PANEL --
  <div class="bg-cyan-950 text-white w-[90%] max-w-lg rounded-lg shadow-xl p-6 space-y-6 z-50 animate-fade-in mt-[4rem] overflow-y-auto max-h-[80vh]">
    
    <!-- Close Button --
    <div class="text-right">
      <button
        class="text-sm bg-cyan-800 hover:bg-cyan-700 text-white px-3 py-1 rounded"
        (click)="close2()"
      > 
        âœ– Close
      </button>
    </div>

    <!-- Lists Section --
    <div>
      <h2  class="text-xl font-bold mb-2 ">{{inputh()===''?'pick a phrase': 'selected: ' + inputh()}}</h2>
      <h2 class="text-lg font-bold mb-2 border-b border-cyan-600 pb-1">Lists</h2>
      <div class="flex flex-col gap-2 overflow-y-scroll h-[15rem]">
        <button
          *ngFor="let item of allgrammer"
          (click)="getSpecificPhrases(item.s)"
          class="hover:bg-cyan-600 text-white px-3 py-2 rounded transition"
          [ngClass]="item.isDone ? 'bg-blue-600' : 'bg-cyan-700'"
        >
                
          
        
        
        
        {{ item.s }}

        </button>
      </div>
    </div>

    <!-- Story Section --
    <div>
      <h2 class="text-lg font-bold mt-4 mb-2 border-b border-cyan-600 pb-1">Story</h2>
      <div class="flex flex-col gap-2 overflow-y-scroll h-[15rem]">
        <button
          *ngFor="let item of allStory"
          (click)="getSpecificPhrases(item.s)"
          class="hover:bg-cyan-500 text-white px-3 py-2 rounded transition"
          [ngClass]="item.isDone ? 'bg-[#0f765e]' : 'bg-cyan-500'"
        >
                {{ item.s}}

        </button>
      </div>
    </div>

  </div>
</div>-->

<header class="flex justify-between items-center p-4 bg-[#0F1F26] shadow-md text-cyan-100">

  <h2 class="text-lg md:text-xl font-bold">
    {{ inputh() === '' ? 'ğŸ“š Pick a list â†’' : 'Currently studying: ' + inputh() }}
  </h2>
  <button
  
    (click)="toggleSidebar()"
    class="bg-cyan-500 hover:bg-cyan-400 text-white px-3 py-2 rounded-lg shadow transition"
  >
    {{ sideBar ? 'âœ– Close' : 'â˜° Menu' }}
  </button>
</header>
<!-- BACKDROP -->
<div *ngIf="sideBar" class="fixed inset-0 bg-grey-700 bg-opacity-60 z-40 flex items-center justify-center ">
  
  <!-- MODAL PANEL -->


  <div class="bg-cyan-950 text-white w-[90%] max-w-lg rounded-lg shadow-xl p-6 space-y-6 z-50 animate-fade-in overflow-y-auto max-h-[80vh]">

    
    <!-- Close Button -->
    <div class="text-right">
      <button
        class="text-sm bg-cyan-800 hover:bg-cyan-700 text-white px-3 py-1 rounded"
        (click)="close2()"
      >
        âœ– Close
      </button>
    </div>
    <h2  class="text-xl font-bold mb-2 ">{{inputh()===''?'pick a phrase': 'selected: ' + inputh()}}</h2>

    <!-- Story Section -->
    <div *ngIf="m1==='course'" class="overflow-y-auto max-h-80">
      
      <h2 class="text-lg font-bold mt-4 mb-2 border-b border-cyan-600 pb-1">Lists</h2>
      <div class="flex flex-col gap-2">
        <button
          *ngFor="let item of allgrammer"
          (click)="getSpecificPhrases(item.s)"
          class="hover:bg-cyan-600 text-white px-3 py-2 rounded transition"
          [ngClass]="item.isDone ? 'bg-blue-600' : 'bg-cyan-700'"
        >
          {{ item.s }}


        </button>
      </div>
    </div>
    <div *ngIf="m1==='popular'" class="overflow-y-auto max-h-80">
      <!-- Popular Phrases -->
      <h2 class="text-lg font-bold mt-4 mb-2 border-b border-cyan-600 pb-1">Popular/Useful</h2>
      <div class="flex flex-col gap-2">
        <button
          *ngFor="let item of allPopular"
          (click)="getSpecificPhrases(item.s)"
          class="hover:bg-cyan-500 text-white px-3 py-2 rounded transition"
          [ngClass]="item.isDone ? 'bg-[#0f765e]' : 'bg-cyan-500'"
        >
          {{ item.s }}
        </button>
      </div>
    </div>
    <div *ngIf="m1 ==='story'" class="overflow-y-auto max-h-80">
      <h2 class="text-lg font-bold mt-4 mb-2 border-b border-cyan-600 pb-1">Story</h2>
      <div class="flex flex-col gap-2">
        <button
          *ngFor="let item of allStory"
          (click)="getSpecificPhrases(item.s)"
          class="hover:bg-cyan-500 text-white px-3 py-2 rounded transition"
          [ngClass]="item.isDone ? 'bg-[#0f765e]' : 'bg-cyan-500'"
        >
          {{ item.s }}
        </button>
      </div>
    </div>

  </div>
</div>
 
<!-- ğŸŒ QUIZ PAGE WRAPPER -->
<div class="min-h-screen  text-white flex flex-col justify-center items-center px-4 py-8 animate-fadeIn">

  <!-- ğŸ·ï¸ Title -->
  <h2 class="text-3xl sm:text-4xl font-bold text-cyan-200 mb-6 text-center animate-slideDown">
    {{ id }}:Choice
  </h2>

  <!-- â–¶ Start Button Section -->
  <div *ngIf="isReadyToStart && !quizStarted" class="text-center space-y-4 animate-popIn">
    <button (click)="startQuiz()"
            class="bg-green-600 hover:bg-green-700 active:scale-95 text-white px-8 py-3 rounded-2xl shadow-lg transition-transform duration-200">
      â–¶ Start 
    </button>
    <div>
      <button (click)="toggleDirection()" 
              class="bg-blue-600 hover:bg-blue-700 active:scale-95 text-white px-4 py-2 rounded-md mt-2 transition-all duration-200">
        ({{ direction === direction1 ? id + ' â†’ English' : 'English â†’ ' + id }})
      </button>
    </div>
  </div>

  <!-- ğŸ§© Active Quiz Section -->
  <div *ngIf="['Korean','Russian','Japanese','German','Italian'].includes(id) && quizStarted"
       class="w-full max-w-xl bg-slate-900/60 p-6 rounded-2xl mt-6 shadow-lg overflow-y-auto animate-fadeInUp">

    <!-- ğŸ§ Control Buttons -->
    <div class="flex justify-center space-x-2 mb-4">
      <button (click)="romanitization()" 
              class="bg-indigo-600 hover:bg-indigo-700 active:scale-95 px-4 py-2 rounded text-sm transition-transform duration-200">
        Pronunciation
      </button>
      <button *ngIf="['ko-to-en','ru-to-en','jp-to-en','itn-to-en','ge-to-en'].includes(direction)"
              (click)="playAudio(direction1 === direction ? phrases()[currentIndex].phrase : phrases()[currentIndex].en, direction1 === direction ? lang : 'en-US')"
              class="bg-cyan-500 hover:bg-cyan-600 active:scale-95 px-3 py-2 rounded text-sm transition-transform duration-200">
        ğŸ”Š Play
      </button>

      <div 
        *ngIf="'course'===m1"
        class="bg-cyan-500 hover:bg-cyan-600 active:scale-95 px-3 py-2 rounded text-sm transition-transform duration-200"
        (click)="highlight()">point 
    </div>
    </div>

    <!-- ğŸ“ Question Area -->
    <div class="bg-cyan-900 p-4 rounded-xl text-center mb-6 shadow animate-flashOnce">
      <p class="text-2xl font-semibold break-words text-emerald-200">
        <span [innerHTML]="formatPhrase(direction1 === direction ? phrases()[currentIndex].phrase : phrases()[currentIndex].en + '')"></span>
      </p>

      <div class="text-lg mt-1 duration-500 transition-opacity ease-in-out"
           [class.opacity-100]="pr"
           [class.opacity-0]="!pr">
        <span *ngIf="pr && ['ko-to-en','ru-to-en','itn-to-en','jp-to-en','ge-to-en'].includes(direction)"
              [innerHTML]="formatPhrase(phrases()[currentIndex][pro2] +'')"></span>
      </div>
    </div>

    <!-- ğŸ’¡ Options Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div *ngFor="let opt of options" class="flex flex-col items-center animate-slideUp">
        <button 
          (click)="selectAnswer(opt.text)"
          [ngClass]="{
            'correct-a text-green-200 border border-green-300 bg-green-600': opt.text===selectedOption && isCorrect === true,
            'text-red-400 border border-red-400 wrong-a': opt.text===selectedOption && isCorrect === false
          }"
          class="p-3 w-full text-center bg-cyan-800 text-emerald-200 border rounded-xl hover:bg-gray-800 active:scale-95 transition-all duration-200 ease-in-out">
          
          <span [innerHTML]="formatPhrase(opt.text + '')"></span>
          <div class="text-cyan-200 mt-1 transition-opacity duration-500"
              [class.opacity-100]="pr"
              [class.opacity-0]="!pr">
            <span *ngIf="pr && ['en-to-ko','en-to-jp','en-to-ru','en-to-itn','en-to-ge'].includes(direction)"
                  [innerHTML]="formatPhrase(opt.pr)"></span>
          </div>
        </button>

        <!-- ğŸ”Š Play Option -->
        <button *ngIf="['en-to-ko','en-to-jp','en-to-ru','en-to-itn','en-to-ge'].includes(direction)"
                (click)="playAudio(opt.text, lang)"
                class="mt-2 bg-cyan-500 hover:bg-cyan-600 active:scale-95 text-white px-2 py-1 rounded text-sm transition-transform duration-200">
          ğŸ”Š Play
        </button>
      </div>
    </div>

    <!-- ğŸ§® Score --
    <p class="mt-6 text-center text-lg font-medium text-gray-300 animate-fadeInSlow">
      Score: <span class="text-blue-400 font-bold">{{ score }}</span>
    </p> 
  -->

    <!-- ğŸ” Try Again -->
    <div *ngIf="quizFinished" class="mt-4 text-center animate-popIn">
      <p class="mb-2">{{score}} / {{phrases().length}}</p>
      <!--<button (click)="tryAgain()"
              class="bg-green-600 hover:bg-green-700 active:scale-95 text-white px-6 py-3 rounded-lg shadow transition-transform duration-200">
        ğŸ” Try Again
      </button>-->
      <app-again 
        [correctCount]="correctAnswers.length"
        [wrongCount]="wrongAnswers.length"
        [userResults]="userResults"
        (retry)="tryAgain()">
      </app-again>
    <!-- âœ… Results Display --
    <div *ngIf="showResults" class="p-6 rounded-lg bg-gray-100 shadow-md text-center">
      <h2 class="text-xl font-bold mb-4">Quiz Results</h2>
      <p class="text-lg">Score: {{ score }} / {{ phrases().length }}</p>

      <div class="mt-4 text-left">
        <h3 class="font-semibold text-green-600">âœ… Correct</h3>
        <ul class="list-disc ml-6">
          <li *ngFor="let c of correctAnswers">{{ formatPhrase(c[this.pro]) }} â†’ {{ c.en }}</li>
        </ul>

        <h3 class="font-semibold text-red-600 mt-4">âŒ Wrong</h3>
        <ul class="list-disc ml-6">
          <li *ngFor="let w of wrongAnswers">{{ formatPhrase(w[this.pro]) }} â†’ {{ w.en }}</li>
        </ul>
        </div>

        <button 
          class="mt-6 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg" 
          (click)="openTryAgain()">
          Try Again
        </button>
      </div>
        <!-- ğŸŒ€ Try Again Popup --
      <div *ngIf="showTryAgainPopup" class="fixed inset-0 bg-grey bg-opacity-50 flex items-center justify-center">
        <div class="bg-white p-6 rounded-lg shadow-lg text-center">
          <h3 class="text-lg font-semibold mb-4">Try again?</h3>
          <button (click)="tryAgain()" class="bg-green-500 text-white px-4 py-2 rounded mr-2">Yes</button>
          <button (click)="closePopup()" class="bg-gray-400 text-white px-4 py-2 rounded">No</button>
        </div>
      </div>

    </div>-->
  </div>
</div>

